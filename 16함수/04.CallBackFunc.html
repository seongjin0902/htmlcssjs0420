<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        //콜백함수(call back)
        //함수를 호출하는 시점이 바뀌어진 형태의 함수'
        //기존방식 : 사용자(개발자)가 함수를 직접 정의 -> 정의된 함수를 호출(call)하여 결과를 반환받는 방ㅅ힉
        //CallBack : 콜백함수에 인자로 로직이담긴 함수를(함수주소)를 전달하여 콜백함수로부터 처리된 결과를
        //반환받는 방식

        // function func(n1,n2){
        //     const result = n1 + n2;
        //     return result;
        // }
        // const r = func(10, 20);     //call
        // console.log("result : " + r);

        // function callbackFunc(n1, n2, logicFunc){       //logicFunc은 callbackFunc에서 사용되는
        //     const r = logicFunc(n1, n2);                //로직이 담긴함수
        //     return r;
        // }
        // function sum(n1, n2){
        //     return n1 + n2;
        // }
        // function sub(n1, n2){
        //     return (n1>n2)? n1 - n2 : n2 - n1;
        // }

        // const r2 = callbackFunc(11,21,sum);
        // console.log("r2 : " + r2);
        // const r3 = callbackFunc(11,21,sub);
        // console.log("r3 : " + r3);

        //-----------------------------------------------------------
        // const data = [11,23,23,42,45];
        // function callbackFunc(data, func){
        //     return func(data);
        // }
        // function sum(data){return data.reduce( (sum,item) => sum + item,0)}
        // function mul(data){return data.reduce( (mul,item) => mul * item,1)}
        // function FilterEvenArr(data){return data.filter( (item) => item%2==0)}

        // const val1 = callbackFunc(data, sum);
        // console.log("val1 : " + val1);

        // const val2 = callbackFunc(data, mul);
        // console.log("val2 : " + val2);

        // const r_arr = callbackFunc(data, FilterEvenArr);
        // console.log("r_arr : " + r_arr)



        //문제
        function callbackFunc(func1,func2,func3,...args){
            const arr1 = proc1(args);      //가변인자를 받아서 그 배열요소 중 필터링된 배열반환
            console.log("숫자필터링된 배열 : " + arr1);
            const arr2 = proc2(arr1);      //숫자만 필터링된 배열 중 짝수만 걸러서 배열로 반환
            console.log("짝수만필터링된 배열 : " + arr2);
            const arr3 = proc3(arr2);      //짝수로 걸러진 배열의 합을 구함
            console.log("짝수의 합을 반환 : " + arr3);
            return arr3;
        }
        function proc1(arr){return arr.filter( (item) => typeof item == 'number')}  //가변인자 배열 중 숫자만 필터링
        function proc2(arr){return arr.filter( (item) => item%2==0)}  //숫자중에 짝수만 필터링
        function proc3(arr){return arr.reduce( (sum,item) => sum+item)}  //짝수의 합을 반환

        const rVal = callbackFunc(proc1, proc2, proc3,10,20,'true',11,152,999,23,'문자열',null,155,24);
        console.log("rVal : " + rVal);



    </script>
</body>
</html>